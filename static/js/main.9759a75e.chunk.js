(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(t,e,n){t.exports=n(563)},134:function(t,e,n){},136:function(t,e,n){},563:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(15),i=n.n(o),s=(n(134),n(103)),u=n(104),l=n(127),p=n(105),c=n(128),f=n(20),d=(n(136),n(126)),m=n.n(d),h=n(30),y=n.n(h),g=n(568),b=n(110);function _(t,e){return t[e].name?t[e].name:"flowpoint_".concat(e)}function v(t,e,n,r){var a={};return Object.keys(t).map(function(e){a[e]={visited:!1,outputs:t[e].outputs,inputs:t[e].inputs}}),function t(e,n,r,a,o,i){if(o.includes(n))return!1;if(e===n)return!0;r[n].visited=!0;var s=!1;return a<i&&r[n].outputs.map(function(n){s||r[n].visited||(s=t(e,n,r,a+1,o,i))}),s}(e,n,a,0,r,Object.keys(t).length)}function w(t,e){var n="        # Layers";return e.map(function(e){var r=t[e];if(!r.flowtype.includes("input")){n+="\n        self."+_(t,e)+" = ";var a=null;r.flowtype in r.layertypes?(n+=r.layertypes[r.flowtype].ref,a=r.layertypes[r.flowtype]):(n+=r.activationtypes[r.flowtype].ref,a=r.activationtypes[r.flowtype]),n+=function(t){var e="",n=0;return Object.keys(t.params).map(function(t){n=Math.max(n,t.length)}),n+=1,Object.keys(t.params).map(function(r){var a=t.params[r];e+=",\n            "+r;for(var o=0;o<n-r.length;o++)e+=" ";e+="= ",a.type.includes("tuple")?(e+="(",a.current.map(function(t){e+=t.toString()+","}),e=e.substring(0,e.length-1)+")"):a.type.includes("int")&&a.current<0?e+="None":e+=a.current}),"("+e.substring(1)+(n>1?"\n        )":")")}(a)}}),n}function k(t,e){var n=[],r={};return Object.keys(t).map(function(e){e=parseInt(e),t[e].flowtype.includes("input")&&n.push(e),r[e]={visited:!1,ready:!1,finished:!1,name:t[e].name,outputs:t[e].outputs,inputs:t[e].inputs}}),e.map(function(t){r[t].visited=!0,r[t].ready=!0}),function t(e,n,r,a){r=parseInt(r);var o=e[r];return o.visited=!0,o.finished||(o.ready=!0,o.inputs.map(function(t){e[t].ready||v(e,t,r,n)||(o.ready=!1)}),o.ready&&a<500&&(n.includes(r)||n.push(r),o.finished=!0,o.outputs.map(function(r){n=t(e,n,r,a+1)}))),n}(r,n,e[0]?e[0]:Object.keys(t)[0],0)}function E(t){var e=[];return Object.keys(t).map(function(n){t[n].flowtype.includes("input")&&e.push(n)}),e}function x(t,e){var n={},r=[];return e.map(function(a){t[a];a in n||(n[a]=_(t,a),t[a].flowtype.includes("input")||r.includes(n[a])||(r.push(a),n[a]="self.state_"+n[a]));var o=function(t,e,n){var r=-1;return n.map(function(n,a){t[n].inputs.includes(e)&&(r=Math.max(r,a))}),n[r]}(t,a,e);o&&(n[o]=n[a])}),n}function S(t){if(0!=Object.keys(t).length){var e="# Created with https://mariusbrataas.github.io/flowpoints_ml/\n\n# Importing torch tools\nimport torch\nfrom torch import nn, optim, cuda\n\n# Importing other libraries\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport time",n=E(t),r=k(t,n),a=x(t,r);e+="\n"+function(t,e,n,r){var a="",o=!1;return e.map(function(e){t[e].flowtype.includes("flatten")&&(o=!0)}),o&&(a+="\n# Helper class for flattening\nclass Flatten(nn.Module):\n    def __init__(self):\n        super(Flatten, self).__init__()\n    def forward(self, x):\n        return x.view(x.shape[0], -1)\n"),a+="\n# Main class\nclass neural_net(nn.Module):\n\n    def __init__(self, optimizer=optim.SGD, learn_rate=0.01, criterion=nn.CrossEntropyLoss(), use_cuda=None):\n        super(neural_net, self).__init__()\n        # Settings\n        self.optim_type = optimizer\n        self.optimizer = None\n        self.learn_rate = learn_rate\n        self.criterion = criterion\n        # Use CUDA?\n        self.use_cuda = use_cuda if (use_cuda != None and cuda.is_available()) else cuda.is_available()\n        # Current loss and loss history\n        self.train_loss = 0\n        self.valid_loss = 0\n        self.train_loss_hist = []\n        self.valid_loss_hist = []",a+="\n"+function(t,e){var n="        # States";n+="\n        self.state = None";var r=[];return t.map(function(t){e[t].includes("self.state_")&&!r.includes(e[t])&&(n+="\n        "+e[t]+" = None",r.push(e[t]))}),n}(e,r),a+="\n"+w(t,e),a+="\n        # Running startup routines\n        self.startup_routines()\n\n    def startup_routines(self):\n        self.optimizer = self.optim_type(self.parameters(), lr=self.learn_rate)\n        if self.use_cuda:\n            self.cuda()"}(t,r,0,a),e+="\n"+function(t,e,n,r){var a="",o="\n    def forward(self";return n.map(function(t){o+=", "+r[t]}),o+="):",e.map(function(e){if(!t[e].flowtype.includes("input")){var n=t[e];a=r[e],o+="\n        "+r[e]+" = self."+_(t,e)+"(",n.inputs.map(function(t,e){e>0&&(o+=" + "),o+=r[t]}),o+=") # ",n.flowtype in n.layertypes?o+=n.layertypes[n.flowtype].ref.replace("nn.",""):o+=n.activationtypes[n.flowtype].ref.replace("nn.","")}}),o+="\n        # Updating state and returning",o+="\n        self.state = "+a,o+="\n        return self.state"}(t,r,n,a),e+="\n\n    def fit_step(self, train_loader):\n        # Preparations for fit step\n        self.train_loss = 0 # Resetting training loss\n        self.train()        # Switching to autograd\n        # Looping through data\n        for x, y in train_loader:\n            # Use CUDA?\n            if self.use_cuda:\n                x, y = x.cuda(), y.cuda()        # Moving tensors to GPU\n            # Performing calculations\n            self.forward(x)                      # Forward pass\n            loss = self.criterion(self.state, y) # Calculating loss\n            self.train_loss += loss.item()       # Adding to epoch loss\n            loss.backward()                      # Backward pass\n            self.optimizer.step()                # Optimizing weights\n            self.optimizer.zero_grad()           # Clearing gradients\n        # Adding loss to history\n        self.train_loss_hist.append(self.train_loss / len(train_loader))",e+="\n\n    def validation_step(self, validation_loader):\n        # Preparations for validation step\n        self.valid_loss = 0 # Resetting validation loss\n        # Switching off autograd\n        with torch.no_grad():\n            # Looping through data\n            for x, y in validation_loader:\n                # Use CUDA?\n                if self.use_cuda:\n                    x, y = x.cuda(), y.cuda()        # Moving tensors to GPU\n                # Performing calculations\n                self.forward(x)                      # Forward pass\n                loss = self.criterion(self.state, y) # Calculating loss\n                self.valid_loss += loss.item()       # Adding to epoch loss\n        # Adding loss to history\n        self.valid_loss_hist.append(self.valid_loss / len(validation_loader))",e+="\n\n    def fit(self, train_loader, validation_loader=None, epochs=10, show_progress=True):\n        # Possibly prepping progress message\n        if show_progress:\n            epoch_l = max(len(str(epochs)), 2)\n            print('Training model...')\n            print('%sEpoch   Training loss   Validation loss   Duration' % ''.rjust(2 * epoch_l - 4, ' '))\n            t = time.time()\n        # Looping through epochs\n        for epoch in range(epochs):\n            self.fit_step(train_loader)                 # Optimizing weights\n            if validation_loader != None:               # Do validation?\n                self.validation_step(validation_loader) # Calculating validation loss\n            # Possibly printing progress\n            if show_progress:\n                print('%s/%s' % (str(epoch + 1).rjust(epoch_l, ' '), str(epochs).ljust(epoch_l, ' ')),\n                    '| %s' % str(round(self.train_loss_hist[-1], 8)).ljust(13, ' '),\n                    '| %s' % str(round(self.valid_loss_hist[-1], 8)).ljust(15, ' '),\n                    '| %ss' % str(round(time.time() - t, 3)).rjust(7, ' '))\n                t = time.time()",e+="\n\n    def plot_hist(self):\n        # Adding plots\n        plt.plot(self.train_loss_hist, color='blue', label='Training loss')\n        plt.plot(self.valid_loss_hist, color='springgreen', label='Validation loss')\n        # Axis labels\n        plt.xlabel('Epoch')\n        plt.ylabel('Loss')\n        plt.legend(loc='upper right')\n        # Displaying plot\n        plt.show()",e+="\n"+function(t,e){var n="\n    def save(self, name='model.pth'):";return n+="\n        if not '.pth' in name: name += '.pth'",n+="\n        torch.save({",e.map(function(e){if(!t[e].flowtype.includes("input")){var r=_(t,e);n+="\n            '"+r+"': self."+r+","}}),n+="\n            'train_loss': self.train_loss,",n+="\n            'valid_loss': self.valid_loss,",n+="\n            'train_loss_hist': self.train_loss_hist,",n+="\n            'valid_loss_hist': self.valid_loss_hist,",n+="\n            'optim_type': self.optim_type,",n+="\n            'learn_rate': self.learn_rate,",n+="\n            'criterion': self.criterion,",n+="\n            'use_cuda': self.use_cuda",n+="\n        }, name)",n+="\n\n    @staticmethod",n+="\n    def load(name='model.pth'):",n+="\n        if not '.pth' in name: name += '.pth'",n+="\n        checkpoint = torch.load(name)",n+="\n        model = neural_net(",n+="\n            optimizer  = checkpoint['optim_type'],",n+="\n            learn_rate = checkpoint['learn_rate'],",n+="\n            criterion  = checkpoint['criterion'],",n+="\n            use_cuda   = checkpoint['use_cuda']",n+="\n        )",e.map(function(e){if(!t[e].flowtype.includes("input")){var r=_(t,e);n+="\n        model."+r+" = checkpoint['"+r+"']"}}),n+="\n        model.train_loss = checkpoint['train_loss']",n+="\n        model.valid_loss = checkpoint['valid_loss']",n+="\n        model.train_loss_hist = checkpoint['train_loss_hist']",n+="\n        model.valid_loss_hist = checkpoint['valid_loss_hist']",n+="\n        model.startup_routines()",n+="\n        return model"}(t,r),e+="\n\n"}else e="Nothing yet";return e}var z=function(t){return t.settings.showPaper?a.a.createElement("div",{style:{position:"fixed",bottom:75,right:10,width:"35%",zIndex:5}},a.a.createElement(y.a,{elevation:2,style:{background:"#f8f8f8"}},a.a.createElement("div",{style:{maxHeight:"81vh",overflowY:"scroll"}},a.a.createElement(g.a,{language:"python",style:b.github},S(t.flowpoints))))):null},O=n(37),F=n.n(O),M=n(16),P=n.n(M),L=n(114),C=n.n(L),j=n(115),T=n.n(j),I=n(116),N=n.n(I),R=n(112),U=n.n(R),D=n(113),A=n.n(D),Y=n(25),X=n.n(Y),V=n(111),G=n.n(V);function B(t){return{key:parseInt(t),name:null,openMenu:"nothing",anchorEl:null,x:0,y:0,width:375,height:200,inputs:[],outputs:[],gotInput:!0,gotOutput:!0,isOpen:!1,layertypes:{linear:{title:"Linear",ref:"nn.Linear",id:0,params:{in_features:{type:"int",current:1},out_features:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.out_features.current,r},autoparams:function(t,e){return e.in_features.current=t[t.length-1],e}},flatten:{title:"Flatten",ref:"Flatten",id:1,params:{},outshape:function(t,e){var n=1/t[0];return t.map(function(t){n*=t}),[t[0],Math.round(n)]},autoparams:function(t,e){return e}},conv1d:{title:"Conv1d",ref:"nn.Conv1d",id:2,params:{in_channels:{type:"int",current:1},out_channels:{type:"int",current:1},kernel_size:{type:"tuple",current:[3]},stride:{type:"tuple",current:[1]},padding:{type:"tuple",current:[0]},dilation:{type:"tuple",current:[1]},groups:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=t[2],r=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]);return[t[0],e.out_channels.current.current,r]},autoparams:function(t,e){return e.in_channels.current=t[1],e}},conv2d:{title:"Conv2d",ref:"nn.Conv2d",id:3,params:{in_channels:{type:"int",current:1},out_channels:{type:"int",current:1},kernel_size:{type:"tuple",current:[3,3]},stride:{type:"tuple",current:[1,1]},padding:{type:"tuple",current:[0,0]},dilation:{type:"tuple",current:[1,1]},groups:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=t[2],r=t[3],a=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]),o=Math.floor(1+(r+2*e.padding.current[1]-e.dilation.current[1]*(e.kernel_size.current[1]-1)-1)/e.stride.current[1]);return[t[0],e.out_channels.current,a,o]},autoparams:function(t,e){return e.in_channels.current=t[1],e}},conv3d:{title:"Conv3d",ref:"nn.Conv3d",id:4,params:{in_channels:{type:"int",current:1},out_channels:{type:"int",current:1},kernel_size:{type:"tuple",current:[3,3,3]},stride:{type:"tuple",current:[1,1,1]},padding:{type:"tuple",current:[0,0,0]},dilation:{type:"tuple",current:[1,1,1]},groups:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=t[2],r=t[3],a=t[4],o=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]),i=Math.floor(1+(r+2*e.padding.current[1]-e.dilation.current[1]*(e.kernel_size.current[1]-1)-1)/e.stride.current[1]),s=Math.floor(1+(a+2*e.padding.current[2]-e.dilation.current[2]*(e.kernel_size.current[2]-1)-1)/e.stride.current[2]);return[t[0],e.out_channels.current,o,i,s]},autoparams:function(t,e){return e.in_channels.current=t[1],e}},maxpool1d:{title:"MaxPool1d",ref:"nn.MaxPool1d",id:5,params:{kernel_size:{type:"int",current:3},stride:{type:"int",current:1},padding:{type:"int",current:0},dilation:{type:"int",current:1},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(t,e){var n=t[2],r=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]);return[t[0],t[0],r]},autoparams:function(t,e){return e}},maxpool2d:{title:"MaxPool2d",ref:"nn.MaxPool2d",id:6,params:{kernel_size:{type:"tuple",current:[3,3]},stride:{type:"tuple",current:[1,1]},padding:{type:"tuple",current:[0,0]},dilation:{type:"tuple",current:[1,1]},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(t,e){var n=t[2],r=t[3],a=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]),o=Math.floor(1+(r+2*e.padding.current[1]-e.dilation.current[1]*(e.kernel_size.current[1]-1)-1)/e.stride.current[1]);return[t[0],t[1],a,o]},autoparams:function(t,e){return e}},maxpool3d:{title:"MaxPool3d",ref:"nn.MaxPool3d",id:7,params:{kernel_size:{type:"tuple",current:[3,3,3]},stride:{type:"tuple",current:[1,1,1]},padding:{type:"tuple",current:[0,0,0]},dilation:{type:"tuple",current:[1,1,1]},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(t,e){var n=t[2],r=t[3],a=t[4],o=Math.floor(1+(n+2*e.padding.current[0]-e.dilation.current[0]*(e.kernel_size.current[0]-1)-1)/e.stride.current[0]),i=Math.floor(1+(r+2*e.padding.current[1]-e.dilation.current[1]*(e.kernel_size.current[1]-1)-1)/e.stride.current[1]),s=Math.floor(1+(a+2*e.padding.current[2]-e.dilation.current[2]*(e.kernel_size.current[2]-1)-1)/e.stride.current[2]);return[t[0],t[1],o,i,s]},autoparams:function(t,e){return e}},batchnorm1d:{title:"BatchNorm1d",ref:"nn.BatchNorm1d",id:8,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},batchnorm2d:{title:"BatchNorm2d",ref:"nn.BatchNorm2d",id:9,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},batchnorm3d:{title:"BatchNorm3d",ref:"nn.BatchNorm3d",id:10,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},groupnorm:{title:"GroupNorm",ref:"nn.GroupNorm",id:11,params:{num_groups:{type:"int",current:1},num_channels:{type:"int",current:1},eps:{type:"double",current:1e-5},affine:{type:"bool",current:"True"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_channels.current=t[1],e}},instancenorm1d:{title:"InstanceNorm1d",ref:"nn.InstanceNorm1d",id:12,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},instancenorm2d:{title:"InstanceNorm2d",ref:"nn.InstanceNorm2d",id:13,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},instancenorm3d:{title:"InstanceNorm3d",ref:"nn.InstanceNorm3d",id:14,params:{num_features:{type:"int",current:1},eps:{type:"double",current:1e-5},momentum:{type:"double",current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e.num_features.current=t[1],e}},rnn:{title:"RNN",ref:"nn.RNN",id:15,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},num_layers:{type:"int",current:1},nonlinearity:{type:"select",options:["relu","tanh"],current:"tanh"},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},lstm:{title:"LSTM",ref:"nn.LSTM",id:16,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},num_layers:{type:"int",current:1},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},gru:{title:"GRU",ref:"nn.GRU",id:17,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},num_layers:{type:"int",current:1},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},rnncell:{title:"RNNCell",ref:"nn.RNNCell",id:18,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},bias:{type:"bool",current:"True"},nonlinearity:{type:"select",options:["relu","tanh"],current:"tanh"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},lstmcell:{title:"LSTMCell",ref:"nn.LSTMCell",id:19,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},grucell:{title:"GRUCell",ref:"nn.GRUCell",id:20,params:{input_size:{type:"int",current:1},hidden_size:{type:"int",current:1},bias:{type:"bool",current:"True"}},outshape:function(t,e){var n=0,r=t.map(function(t,e){return n=e,t});return r[n]=e.hidden_size.current,r},autoparams:function(t,e){return e.input_size.current=t[t.length-1],e}},dropout:{title:"Dropout",ref:"nn.Dropout",id:21,params:{p:{type:"double",current:.5},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},dropout2d:{title:"Dropout2d",ref:"nn.Dropout2d",id:22,params:{p:{type:"double",current:.5},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},dropout3d:{title:"Dropout3d",ref:"nn.Dropout3d",id:23,params:{p:{type:"double",current:.5},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},alphadropout:{title:"AlphaDropout",ref:"nn.AlphaDropout",id:24,params:{p:{type:"double",current:.5},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}}},activationtypes:{elu:{title:"ELU",ref:"nn.ELU",id:25,params:{alpha:{type:"double",current:1},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},hardshrink:{title:"Hardshrink",ref:"nn.Hardshrink",id:26,params:{lambd:{type:"double",current:"0.5"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},hardtanh:{title:"Hardtanh",ref:"nn.Hardtanh",id:27,params:{min_val:{type:"double",current:-1},max_val:{type:"double",current:1},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},leakyrelu:{title:"LeakyReLU",ref:"nn.LeakyReLU",id:28,params:{negative_slope:{type:"double",current:.01},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},logsigmoid:{title:"LogSigmoid",ref:"nn.LogSigmoid",id:29,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},prelu:{title:"PReLU",ref:"nn.PReLU",id:30,params:{num_parameters:{type:"int",current:1},init:{type:"double",current:.25}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},relu:{title:"ReLU",ref:"nn.ReLU",id:31,params:{inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},relu6:{title:"ReLU6",ref:"nn.ReLU6",id:32,params:{inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},rrelu:{title:"RReLU",ref:"nn.RReLU",id:33,params:{lower:{type:"double",current:1/8},upper:{type:"double",current:1/3},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},selu:{title:"SELU",ref:"nn.SELU",id:34,params:{inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},celu:{title:"CELU",ref:"nn.CELU",id:35,params:{alpha:{type:"double",current:1},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},sigmoid:{title:"Sigmoid",ref:"nn.Sigmoid",id:36,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softplus:{title:"Softplus",ref:"nn.Softplus",id:37,params:{beta:{type:"double",current:1},threshold:{type:"double",current:20}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softshrink:{title:"Softshrink",ref:"nn.Softshrink",id:38,params:{lambd:{type:"double",current:.5}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softsign:{title:"Softsign",ref:"nn.Softsign",id:39,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},tanh:{title:"Tanh",ref:"nn.Tanh",id:40,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},tanhshrink:{title:"Tanhshrink",ref:"nn.Tanhshrink",id:41,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},threshold:{title:"Threshold",ref:"nn.Threshold",id:42,params:{threshold:{type:"double",current:.1},value:{type:"double",current:.1},inplace:{type:"bool",current:"False"}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softmin:{title:"Softmin",ref:"nn.Softmin",id:43,params:{dim:{type:"int",current:-1}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softmax:{title:"Softmax",ref:"nn.Softmax",id:44,params:{dim:{type:"int",current:-1}},outshape:function(t,e){return t},autoparams:function(t,e){return e}},softmax2d:{title:"Softmax2d",ref:"nn.Softmax2d",id:45,params:{},outshape:function(t,e){return t},autoparams:function(t,e){return e}},logsoftmax:{title:"LogSoftmax",ref:"nn.LogSoftmax",id:46,params:{dim:{type:"int",current:-1}},outshape:function(t,e){return t},autoparams:function(t,e){return e}}},flowtype:"linear",output_shape:[1,1],input_point_dims:2}}function H(t){var e={};return t.split("_").map(function(t){var n=function(t){var e=B(0),n=t.split("&");if(e.key=parseInt(n[0]),e.name=n[1],n[2].includes("i"))e.flowtype="input";else{var r=parseInt(n[2]),a=!1,o=null;Object.keys(e.layertypes).map(function(t){a||r!==e.layertypes[t].id||(a=!0,e.flowtype=t.toString(),o=e.layertypes[e.flowtype])}),Object.keys(e.activationtypes).map(function(t){a||r!==e.activationtypes[t].id||(a=!0,e.flowtype=t.toString(),o=e.activationtypes[e.flowtype])})}if(n[3].split(",").map(function(t){"".includes(t)||e.outputs.push(parseInt(t))}),e.x=10*parseInt(n[4].split(",")[0]),e.y=10*parseInt(n[4].split(",")[1]),e.flowtype.includes("input"))e.output_shape=[],n[5].split(",").map(function(t){e.output_shape.push(parseInt(t))}),e.input_point_dims=e.output_shape.length;else{var i=n[5].split(",");Object.keys(o.params).sort().map(function(t,e){switch(o.params[t].type){case"bool":o.params[t].current=1===parseInt(i[e])?"True":"False";break;case"double":o.params[t].current=parseFloat(i[e]);break;case"tuple":o.params[t].current=[],i[e].split(";").map(function(e){o.params[t].current.push(parseInt(e))});break;default:o.params[t].current=parseInt(i[e])}})}return e}(t);e[n.key]=n}),Object.keys(e).map(function(t){t=parseInt(t),e[t].outputs.map(function(n){n=parseInt(n),e[n].inputs.includes(t)||e[n].inputs.push(t)})}),e}function W(t,e){var n="";return e.map(function(e){t[e].flowtype.includes("input")?n+=function(t){var e=t.key+"&"+(t.name?t.name:"")+"&i&",n=!1;return t.outputs.map(function(t){n=!0,e+=t+","}),n&&(e=e.substring(0,e.length-1)),e+="&",e+=Math.round(t.x/10)+","+Math.round(t.y/10)+"&",n=!1,t.output_shape.map(function(t){n=!0,e+=t+","}),n&&(e=e.substring(0,e.length-1)),e}(t[e])+"_":n+=function(t){var e=null;e=t.flowtype in t.layertypes?t.layertypes[t.flowtype]:t.activationtypes[t.flowtype];var n=t.key+"&"+(t.name?t.name:"")+"&"+e.id+"&",r=!1;return t.outputs.map(function(t){r=!0,n+=t+","}),r&&(n=n.substring(0,n.length-1)),n+="&",n+=Math.round(t.x/10)+","+Math.round(t.y/10)+"&",r=!1,Object.keys(e.params).sort().map(function(t,a){switch(r=!0,e.params[t].type){case"bool":n+=e.params[t].current.includes("True")?"1,":"0,";break;case"tuple":e.params[t].current.map(function(t){n+=t+";"}),n=n.substring(0,n.length-1)+",";break;default:n+=e.params[t].current+","}}),r&&(n=n.substring(0,n.length-1)),n}(t[e])+"_"}),n.substring(0,n.length-1)}var J=function(t){t.snapX,t.snapY,t.refresh().settings;return a.a.createElement("div",null,a.a.createElement("div",{style:{position:"fixed",bottom:0,left:0,padding:"5px",paddingRight:"30px"}},a.a.createElement(X.a,{title:"Zoom in"},a.a.createElement(P.a,{onClick:function(){var e=t.refresh().settings;e.zoom=Math.min(1.5,Math.max(.5,e.zoom+.1)),t.updateSettings(e)}},a.a.createElement(U.a,null))),a.a.createElement(X.a,{title:"Zoom out"},a.a.createElement(P.a,{onClick:function(){var e=t.refresh().settings;e.zoom=Math.min(1.5,Math.max(.5,e.zoom-.1)),t.updateSettings(e)}},a.a.createElement(A.a,null)))),a.a.createElement("div",{style:{position:"fixed",bottom:0,right:0,padding:"10px",paddingLeft:"30px"}},a.a.createElement(X.a,{title:"Add"},a.a.createElement(F.a,{style:{background:"#00a8ff",color:"#ffffff"},"aria-label":"Add",onClick:function(){var e=t.refresh(),n=e.flowpoints,r=e.settings,a=B(r.count),o=r.snapX;r.snapY;a.x=t.lastPosX+(Object.keys(n).length>0?o:0),a.y=t.lastPosY,0==Object.keys(n).length&&(a.gotInput=!1,a.flowtype="input"),t.updateLastPos(a.x,a.y),n[r.count]=a,r.count+=1,t.updateView(n,r)}},a.a.createElement(C.a,null)))," ",a.a.createElement(X.a,{title:"Show/hide code"},a.a.createElement(F.a,{style:{background:"#00ed3f",color:"white"},"aria-label":"Add",onClick:function(){var e=t.refresh().settings;e.showPaper^=!0,t.updateSettings(e)}},a.a.createElement(T.a,null)))," ",a.a.createElement(X.a,{title:"Copy code"},a.a.createElement(F.a,{style:{background:"#bfbfbf",color:"black"},"aria-label":"Add",onClick:function(){G()(S(t.refresh().flowpoints));var e=t.refresh().settings;e.snackbarMsg="Copied code to clipboard",e.showSnackbar=!0,t.updateSettings(e)}},a.a.createElement(N.a,null))),"  "))},Z=function(t){var e=t.flowpoints,n=[];return Object.keys(e).map(function(t){var r=e[t];r&&r.outputs.map(function(t){var o=e[t],i=r.x+r.width-35,s=r.y+22,u=o.x+15,l=o.y+22;n.push(a.a.createElement("path",{d:"M"+i+","+s+"C"+(i+100)+","+s+" "+(u-100)+","+l+" "+(u-1e-4)+","+(l-1e-4),fill:"none",stroke:i<u?"url(#grad1)":"url(#grad2)",strokeWidth:3}))})}),a.a.createElement("svg",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible"}},a.a.createElement("linearGradient",{id:"grad1",x1:"0",y1:"0",x2:"1",y2:"0"},a.a.createElement("stop",{offset:"0","stop-color":"#6e00ff"}),a.a.createElement("stop",{offset:"1","stop-color":"#00e9ff"})),a.a.createElement("linearGradient",{id:"grad2",x1:"1",y1:"0",x2:"0",y2:"0"},a.a.createElement("stop",{offset:"0","stop-color":"#6e00ff"}),a.a.createElement("stop",{offset:"1","stop-color":"#00e9ff"})),n)},$=n(117),q=n.n($),K=n(122),Q=n.n(K),tt=n(123),et=n.n(tt),nt=n(66),rt=n.n(nt),at=n(65),ot=n.n(at),it=n(24),st=n.n(it),ut=n(26),lt=n.n(ut),pt=n(63),ct=n.n(pt),ft=n(118),dt=n.n(ft),mt=n(119),ht=n.n(mt),yt=n(62),gt=n.n(yt),bt=n(64),_t=n.n(bt),vt=n(121),wt=n.n(vt),kt=n(120),Et=n.n(kt),xt=function(t){var e=t.localState,n=null;return(n=e.flowtype in e.layertypes?e.layertypes[e.flowtype]:e.activationtypes[e.flowtype])?(n=n.params,a.a.createElement("div",null,a.a.createElement("div",{className:"card-contents"},a.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault()}},a.a.createElement(lt.a,{label:"Name",margin:"none",style:{marginTop:"10px",width:"90%"},value:e.name,onChange:function(n){var r=t.refresh().flowpoints;r[e.key].name=n.target.value,t.updateFlowpoints(r)}}))),a.a.createElement("div",{style:{marginTop:"10px"}},a.a.createElement(st.a,{variant:"subtitle1",color:"textSecondary"},"Parameters"),Object.keys(n).map(function(r){if(n[r].type.includes("int"))return a.a.createElement(lt.a,{label:r,value:0!=n[r].current?n[r].current:null,onChange:function(n){var a=t.refresh().flowpoints,o=a[e.key];o.flowtype in o.layertypes?o.layertypes[o.flowtype].params[r].current=Math.round(n.target.value):o.activationtypes[o.flowtype].params[r].current=Math.round(n.target.value),t.updateFlowpoints(a)},type:"number",margin:"dense",variant:"outlined",style:{width:"100px",paddingRight:"5px"}})}),Object.keys(n).map(function(r){if(n[r].type.includes("double"))return a.a.createElement(lt.a,{label:r,value:0!=n[r].current?n[r].current:null,onChange:function(n){var a=t.refresh().flowpoints,o=a[e.key];o.flowtype in o.layertypes?o.layertypes[o.flowtype].params[r].current=n.target.value:o.activationtypes[o.flowtype].params[r].current=n.target.value,t.updateFlowpoints(a)},type:"number",margin:"dense",variant:"outlined",style:{width:"100px",paddingRight:"5px"}})})),a.a.createElement("div",null,Object.keys(n).map(function(r){if(n[r].type.includes("tuple"))return a.a.createElement("div",null,n[r].current.map(function(o,i){return a.a.createElement(lt.a,{label:r+" "+i,value:0!=n[r].current[i]?n[r].current[i]:null,onChange:function(n){var a=t.refresh().flowpoints,o=a[e.key];o.flowtype in o.layertypes?o.layertypes[o.flowtype].params[r].current[i]=Math.round(n.target.value):o.activationtypes[o.flowtype].params[r].current[i]=Math.round(n.target.value),t.updateFlowpoints(a)},type:"number",margin:"dense",variant:"outlined",style:{width:"100px",paddingRight:"5px"}})}))})),a.a.createElement("div",null,a.a.createElement(ct.a,{row:!0},Object.keys(n).map(function(r){if(n[r].type.includes("bool"))return a.a.createElement(dt.a,{control:a.a.createElement(ht.a,{checked:n[r].current.includes("True"),onChange:function(n){var a=t.refresh().flowpoints,o=a[e.key];if(o.flowtype in o.layertypes){var i=o.layertypes[o.flowtype].params[r].current;o.layertypes[o.flowtype].params[r].current=i.includes("True")?"False":"True"}else{i=o.activationtypes[o.flowtype].params[r].current;o.activationtypes[o.flowtype].params[r].current=i.includes("True")?"False":"True"}t.updateFlowpoints(a)}}),label:r})}))))):e.flowtype.includes("input")?a.a.createElement("div",null,a.a.createElement("div",{className:"card-contents"},a.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault()}},a.a.createElement(lt.a,{label:"Name",margin:"none",style:{marginTop:"10px",width:"90%"},value:e.name,onChange:function(n){var r=t.refresh().flowpoints;r[e.key].name=n.target.value,t.updateFlowpoints(r)}}))),a.a.createElement("div",{style:{marginTop:"10px"}},a.a.createElement(st.a,{variant:"subtitle1",color:"textSecondary"},"Parameters"),a.a.createElement(lt.a,{label:"Dimensions",value:0!=e.input_point_dims?e.input_point_dims:null,onChange:function(n){var r=t.refresh().flowpoints,a=r[e.key];a.input_point_dims=Math.min(10,Math.max(0,Math.round(n.target.value)));var o=a.input_point_dims-a.output_shape.length;if(o>0&&Array.from(Array(o).keys()).map(function(t,e){a.output_shape.push(1)}),o<0){var i=a.output_shape;a.output_shape=[],Array.from(Array(a.input_point_dims).keys()).map(function(t,e){a.output_shape.push(i[e])})}r[e.key]=a,t.updateFlowpoints(r)},type:"number",margin:"dense",variant:"outlined",style:{width:"100px",paddingRight:"5px"}}),a.a.createElement(ct.a,{row:!0},e.output_shape.map(function(n,r){return a.a.createElement(lt.a,{label:"dim_"+r,value:0!=n?n:null,onChange:function(n){var a=t.refresh().flowpoints;a[e.key].output_shape[r]=Math.max(0,Math.round(n.target.value)),t.updateFlowpoints(a)},type:"number",margin:"dense",variant:"outlined",style:{width:"100px",paddingRight:"5px"}})})))):a.a.createElement(st.a,{variant:"subtitle1",color:"textSecondary"},"No parameters")},St=function(t){var e=t.localState,n=t.localState.key,r=t.localState.layertypes,o=t.localState.activationtypes;return a.a.createElement("div",{className:"card-contents"},a.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault()}},a.a.createElement(gt.a,{native:!0,margin:"none",style:{marginLeft:"10px",width:"70%"},value:e.flowtype,onChange:function(r){var a=t.refresh().flowpoints,o=a[n];o.flowtype=r.target.value,o.flowtype.includes("input")&&(o.inputs.map(function(t){a[t].outputs.splice(a[t].outputs.indexOf(e.key))}),o.inputs=[]),t.updateFlowpoints(a)}},a.a.createElement("option",{value:"input"},"Input"),a.a.createElement(_t.a,null),Object.keys(r).map(function(t){return a.a.createElement("option",{value:t},r[t].title)}),a.a.createElement(_t.a,null),Object.keys(o).map(function(t){return a.a.createElement("option",{value:t},o[t].title)})),a.a.createElement(P.a,{style:{marginLeft:"10px",top:"5px"},onClick:function(){var n=t.refresh().flowpoints;n[e.key].isOpen^=!0,t.updateFlowpoints(n)}},e.isOpen?a.a.createElement(Et.a,null):a.a.createElement(wt.a,null))),e.isOpen?a.a.createElement("div",{style:{marginLeft:"5px"}},a.a.createElement(xt,{localState:e,refresh:t.refresh,updateFlowpoints:t.updateFlowpoints})):null)};var zt=function(t){var e=t.localState,n=t.settings,r=t.refresh,o=t.updateView,i=n.currentOutput,s=n.currentInput;return a.a.createElement("div",{style:{width:"auto",float:"left",pointerEvents:"auto"}},e.flowtype.includes("input")?a.a.createElement(P.a,{"aria-label":"Output",disabled:!0,style:{color:"#006ed6",boxShadow:"none",background:null}},a.a.createElement(rt.a,{fontSize:"small"})):a.a.createElement(P.a,{"aria-label":"Input",style:{color:"#006ed6",boxShadow:"none",background:e.key===s?"#bfd7ff":null},onClick:function(){var t=r().flowpoints,a=t[e.key];if(null!=i){var u=t[i];u.outputs.includes(a.key)?(u.outputs.splice(u.outputs.indexOf(a.key),1),a.inputs.splice(a.inputs.indexOf(i),1)):(u.outputs.push(a.key),a.inputs.push(i)),n.currentOutput=null,n.currentInput=null}else s===a.key?n.currentInput=null:n.currentInput=a.key;o(t,n)}},a.a.createElement(ot.a,{fontSize:"small"})))},Ot=function(t){var e=t.localState,n=t.settings,r=t.refresh,o=t.updateView,i=n.currentOutput,s=n.currentInput;return a.a.createElement("div",{style:{width:"auto",height:"100%",float:"left",pointerEvents:"auto"}},e.gotOutput?a.a.createElement(P.a,{"aria-label":"Input",style:{color:"#006ed6",boxShadow:"none",background:e.key===i?"#bfd7ff":null},onClick:function(){var t=r().flowpoints,a=t[e.key];if(null!=s){var u=t[s];u.inputs.includes(a.key)?(u.inputs.splice(u.inputs.indexOf(a.key),1),a.outputs.splice(a.outputs.indexOf(s),1)):(u.inputs.push(a.key),a.outputs.push(s)),n.currentOutput=null,n.currentInput=null}else i===a.key?n.currentOutput=null:n.currentOutput=a.key;o(t,n)}},a.a.createElement(ot.a,{fontSize:"small"})):a.a.createElement(P.a,{"aria-label":"Output",disabled:!0,style:{color:"#006ed6",boxShadow:"none",background:null}},a.a.createElement(rt.a,{fontSize:"small"})))},Ft=function(t){var e=t.localState;if(e){var n=t.refresh,r=t.updateFlowpoints,o=(t.updateSettings,t.updateView),i=e.key,s=n().settings,u=s.snapX,l=s.snapY;return a.a.createElement(q.a,{grid:[u,l],bounds:{left:0,top:0},cancel:".card-contents",defaultPosition:{x:e.x-e.x%u,y:e.y-e.y%l},onDrag:function(e,a){e.preventDefault();var o=n().flowpoints,s=o[i];s.x=a.x,s.y=a.y,s.height=a.node.clientHeight,t.updateLastPos(s.x,s.y),r(o)}},a.a.createElement("div",{style:{width:e.width,padding:"0px",paddingBottom:"5px",position:"absolute",pointerEvents:"none",zIndex:e.isOpen?1:0}},a.a.createElement(zt,{localState:e,settings:s,refresh:n,updateView:o}),a.a.createElement("div",{style:{width:"70%",float:"left",pointerEvents:"auto"}},a.a.createElement(Q.a,null,a.a.createElement("div",{style:{marginLeft:"10px",marginTop:"2px",marginRight:"10px"}},a.a.createElement(St,{localState:e,settings:s,refresh:n,updateFlowpoints:r})),a.a.createElement("div",{style:{padding:"2px",float:"left"}},a.a.createElement(X.a,{title:"Delete"},a.a.createElement(P.a,{"aria-label":"Delete",onClick:function(){var a=n().flowpoints,o=a[e.key];o.inputs.map(function(t){var e=a[t];e.outputs.splice(e.outputs.indexOf(o.key),1)}),o.outputs.map(function(t){var e=a[t];e.inputs.splice(e.inputs.indexOf(o.key),1)}),delete a[i],0===Object.keys(a).length&&t.updateLastPos(0,0),r(a)}},a.a.createElement(et.a,null))),"  ",function(t){var e="[";return t.map(function(t){e+=t+","}),e=e.substring(0,e.length-1),e+="]"}(e.output_shape)))),a.a.createElement(Ot,{localState:e,settings:s,refresh:n,updateView:o})))}},Mt=function(t){var e=t.refresh().flowpoints,n=Object.keys(e).map(function(n,r){return a.a.createElement(Ft,{key:n,localState:e[n],updateLastPos:t.updateLastPos,lastPosX:t.lastPosX,lastPosY:t.lastPosY,state:t.state,refresh:t.refresh,updateFlowpoints:t.updateFlowpoints,updateSettings:t.updateSettings,updateView:t.updateView})});return a.a.createElement("div",{style:{width:"100%",height:"100%"}},n)},Pt=n(124),Lt=n.n(Pt),Ct=n(125),jt=n.n(Ct),Tt=n(49),It=function(t){return a.a.createElement(Lt.a,{position:"fixed",style:{height:"60px",background:"#0a9dff",boxShadow:"none"}},a.a.createElement(jt.a,null,a.a.createElement("div",{style:{flexGrow:1}},a.a.createElement(st.a,{variant:"h6",color:"inherit"},"Flowpoints ML")),a.a.createElement(P.a,{style:{color:"#ffffff"},href:"https://github.com/mariusbrataas/flowpoints_ml",target:"_blank"},a.a.createElement(Tt.b,null)),a.a.createElement(P.a,{style:{color:"#ffffff"},href:"https://www.linkedin.com/in/marius-brataas-355567106/",target:"_blank"},a.a.createElement(Tt.c,null)),a.a.createElement(P.a,{style:{color:"#ffffff"},href:"https://www.facebook.com/marius.brataas",target:"_blank"},a.a.createElement(Tt.a,null))))},Nt=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(p.a)(e).call(this,t))).bezierOffset=90,n.lastPosX=0,n.lastPosY=0,n.maxX=0,n.maxY=0,n.state={flowpoints:{},settings:{count:0,zoom:1,currentInput:null,currentOutput:null,showPaper:!1,snapX:10,snapY:10,showSnackbar:!1,snackbarMsg:"Wubbalubbadubdub",url:"https://mariusbrataas.github.io/flowpoints_ml"}},n.updateLastPos=n.updateLastPos.bind(Object(f.a)(Object(f.a)(n))),n.updateFrameSize=n.updateFrameSize.bind(Object(f.a)(Object(f.a)(n))),n.autoFrameSize=n.autoFrameSize.bind(Object(f.a)(Object(f.a)(n))),n.setOutputShapes=n.setOutputShapes.bind(Object(f.a)(Object(f.a)(n))),n}return Object(c.a)(e,t),Object(u.a)(e,[{key:"updateLastPos",value:function(t,e){this.lastPosX=t,this.lastPosY=e}},{key:"updateFrameSize",value:function(t,e){this.maxX=t,this.maxY=e}},{key:"autoFrameSize",value:function(){var t=this.state.flowpoints,e=this.state.settings.showPaper?4:2,n=10,r=10;Object.keys(t).map(function(a){var o=t[a];n=Math.max(n,o.x+e*o.width),r=Math.max(r,o.y+2*o.height)}),this.updateFrameSize(n,r)}},{key:"componentWillMount",value:function(){var t=window.location.href;if(t.includes("load?"))try{var e=H(t.split("load?")[1]),n=this.state.settings,r=0;Object.keys(e).map(function(t){r=Math.max(r,parseInt(t)+1)}),n.count=r,this.setState({flowpoints:e,settings:n})}catch(a){(n=this.state.settings).snackbarMsg="Failed to load model.",n.showSnackbar=!0,this.setState({settings:n})}}},{key:"setOutputShapes",value:function(t,e){var n=this;e.map(function(t,r){var a=n.state.flowpoints[t],o=null;if(!a.flowtype.includes("input")){o=a.flowtype in a.layertypes?a.layertypes[a.flowtype]:a.activationtypes[a.flowtype];var i=null;a.inputs.map(function(n){e.indexOf(t)>e.indexOf(n)&&(i=n)}),null!=i&&(o.params=o.autoparams(n.state.flowpoints[i].output_shape,o.params),n.state.flowpoints[t].output_shape=o.outshape(n.state.flowpoints[i].output_shape,o.params))}})}},{key:"render",value:function(){var t=this;this.autoFrameSize();var e=[],n=[];return 0!=Object.keys(this.state.flowpoints).length&&(n=E(this.state.flowpoints),e=k(this.state.flowpoints,n),this.setOutputShapes(n,e)),e.length>0?window.history.replaceState({},null,this.state.settings.url+"/?p=load?"+W(this.state.flowpoints,e)):window.history.replaceState({},null,this.state.settings.url),a.a.createElement("div",null,a.a.createElement("div",{ref:this.mainRef,style:{width:"100vw",height:"90vh",paddingTop:"10vh",overflow:"scroll"}},a.a.createElement(z,{flowpoints:this.state.flowpoints,settings:this.state.settings}),a.a.createElement("div",{style:{transform:"scale("+this.state.settings.zoom+")","transform-origin":"top left",transition:".1s ease-in-out"}},a.a.createElement("div",{style:{width:this.maxX+50,height:this.maxY+50,position:"relative"}},a.a.createElement(Z,{flowpoints:this.state.flowpoints}),a.a.createElement(Mt,{flowpoints:this.state.flowpoints,updateLastPos:this.updateLastPos,lastPosX:this.lastPosX,lastPosY:this.lastPosY,state:this.state,refresh:function(){return t.state},updateFlowpoints:function(e){t.setState({flowpoints:e})},updateSettings:function(e){t.setState({settings:e})},updateView:function(e,n){t.setState({flowpoints:e,settings:n})}}))),a.a.createElement("div",{style:{top:"0px",position:"fixed",zIndex:5}},a.a.createElement(It,null)),a.a.createElement(J,{updateLastPos:this.updateLastPos,lastPosX:this.lastPosX,lastPosY:this.lastPosY,state:this.state,order:e,refresh:function(){return t.state},updateFlowpoints:function(e){t.setState({flowpoints:e})},updateSettings:function(e){t.setState({settings:e})},updateView:function(e,n){t.setState({flowpoints:e,settings:n})}}),a.a.createElement(m.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.settings.showSnackbar,autoHideDuration:3e3,onClose:function(){var e=t.state.settings;e.showSnackbar=!1,t.setState({settings:e})},message:this.state.settings.snackbarMsg,style:{width:"auto"}})))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.9759a75e.chunk.js.map