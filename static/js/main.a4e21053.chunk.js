(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,n){e.exports=n(591)},153:function(e,t,n){},155:function(e,t,n){},158:function(e,t,n){},591:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),s=n.n(i),o=(n(153),n(26)),l=n(27),u=n(30),c=n(28),p=n(29),d=n(18),m=(n(155),n(89));function h(e,t){var n=e[t];return(""===n.name?"p_"+t:n.name).replace(/ /g,"_")}function f(e,t,n,a,r){var i=e[t];return i.visited?n:(i.ready=function(e,t){var n=!0;return Object.keys(e[t].inputs).map(function(t){e[t].ready||(n=!1)}),n}(e,t),i.ready&&(i.visited=!0,n.includes(t)||n.push(t),Object.keys(i.outputs).map(function(t){n=f(e,t,n,a+1,r)})),n)}function g(e,t){var n={};return t.map(function(a,r){var i=e[a];a in n||(n[a]=h(e,a)+("Input"===i.specTitle?"":"_state"));var s=function(e,t,n){var a=-1;return t.map(function(t,r){n in e[t].inputs&&(a=Math.max(a,r))}),t[a]}(e,t,a);s&&(n[s]=n[a])}),n[t[t.length-1]]="self.state",n}function b(e){var t=[],n={},a=function(e){var t=0,n={};return Object.keys(e).map(function(a){var r=e[a];n[a]={specTitle:r.specs.title,inputs:{},outputs:{},name:r.name,ref:r.specs.ref,params:r.specs.params,index:null,visited:!1,downstreamVisited:!1,ready:!1,statename:null,needState:!1},"Input"===r.specs.title&&(n[a].index=t,n[a].ready=!0,n[a].statename=""===r.name?"input_"+t:r.name,t+=1)}),Object.keys(e).map(function(t){var a=n[t];Object.keys(e[t].outputs).map(function(e){a.outputs[e]=n[e],n[e].inputs[t]=n[t]})}),n}(e);Object.keys(a).map(function(e){a[e].ready&&(t.push(e),n[e]=a[e])}),Object.keys(n).map(function(e){t=f(a,e,t,0,100)});var r=g(a,t);return{lib:a,order:t,states:r,inputs:Object.keys(n)}}function y(e,t){var n=!1;Object.keys(e).map(function(t){"Flatten"===e[t].specs.title&&(n=!0)});var a=t.order,r=t.states,i=t.inputs,s="'''\nCreated with https://mariusbrataas.github.io/flowpoints_ml/\n\nLICENSE:\nhttps://github.com/mariusbrataas/flowpoints_ml/blob/master/LICENSE\n'''";return s+="\n\n\n# Importing torch tools\nimport torch\nfrom torch import nn, optim, cuda\n\n\n# Importing other libraries\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport time",n&&(s+="\n\n\n# Helper class for flattening\nclass Flatten(nn.Module):\n    def __init__(self):\n        super(Flatten, self).__init__()\n    def forward(self, x):\n        return x.view(x.shape[0], -1)"),s+="\n\n\n"+function(e,t){var n="# Model";return n+="\nclass neural_net(nn.Module):",n+="\n\n\n    def __init__(self, optimizer=optim.SGD, alpha=0.01, criterion=nn.CrossEntropyLoss(), use_cuda=None):",n+="\n\n        # Basics",n+="\n        super(neural_net, self).__init__()",n+="\n\n        # Settings",n+="\n        self.optim_type = optimizer",n+="\n        self.optimizer  = None",n+="\n        self.alpha      = alpha",n+="\n        self.criterion  = criterion",n+="\n\n        # Use CUDA?",n+="\n        self.use_cuda = use_cuda if (use_cuda != None and cuda.is_available()) else cuda.is_available()",n+="\n\n        # Current loss and loss history",n+="\n        self.train_loss      = 0",n+="\n        self.valid_loss      = 0",n+="\n        self.train_loss_hist = []",n+="\n        self.valid_loss_hist = []",n+="\n\n        # State",n+="\n        self.state = None",n+="\n\n        # Adding all modules",t.map(function(t){var a=e[t];if("Input"!==a.specs.title){var r=0;Object.keys(a.specs.params).map(function(e){r=Math.max(e.length,r)}),n+="\n        self."+h(e,t)+" = "+a.specs.ref+"(",Object.keys(a.specs.params).map(function(e){n+="\n            "+e;for(var t=0;t<r-e.length;t++)n+=" ";n+=" = ","tuple"===a.specs.params[e].type?(n+="(",a.specs.params[e].current.map(function(e){n+=e+","}),n=n.substring(0,n.length-1)+")"):"select"===a.specs.params[e].type?n+="'"+a.specs.params[e].current+"'":n+=a.specs.params[e].current}),r>0&&(n+="\n        "),n+=")"}}),n+="\n\n        # Running startup routines",n+="\n        self.startup_routines()"}(e,a),s+="\n\n\n    def startup_routines(self):\n        self.optimizer = self.optim_type(self.parameters(), lr=self.alpha)\n        if self.use_cuda:\n            self.cuda()",s+="\n\n\n"+function(e,t,n,a){var r="    def forward(";return a.map(function(e){r+=t[e]+", "}),r=r.substring(0,r.length-2)+"):",n.map(function(n){var a=e[n];"Input"!==a.specTitle&&(r+="\n        "+t[n]+" = ",r+=h(e,n)+"(",Object.keys(a.inputs).map(function(e){r+=t[e]+" + "}),r=r.substring(0,r.length-3)+") # "+a.specTitle)}),r+="\n        return self.state"}(t.lib,r,a,i),s+="\n\n\n    def fit_step(self, train_loader):\n\n        # Preparations for fit step\n        self.train_loss = 0 # Resetting training loss\n        self.train()        # Switching to autograd\n\n        # Looping through data\n        for x, y in train_loader:\n\n            # Use CUDA?\n            if self.use_cuda:\n                x, y = x.cuda(), y.cuda()        # Moving tensors to GPU\n\n            # Performing calculations\n            self.forward(x)                      # Forward pass\n            loss = self.criterion(self.state, y) # Calculating loss\n            self.train_loss += loss.item()       # Adding to epoch loss\n            loss.backward()                      # Backward pass\n            self.optimizer.step()                # Optimizing weights\n            self.optimizer.zero_grad()           # Clearing gradients\n\n        # Adding loss to history\n        self.train_loss_hist.append(self.train_loss / len(train_loader))",s+="\n\n\n    def validation_step(self, validation_loader):\n\n        # Preparations for validation step\n        self.validation_loss = 0 # Resetting validation loss\n\n        # Swithing off autograd\n        with torch.no_grad():\n\n            # Looping through data\n            for x, y in validation_loader:\n\n                # Use CUDA?\n                if self.use_cuda:\n                    x, y = x.cuda(), y.cuda()        # Moving tensors to GPU\n\n                # Performing calculations\n                self.forward(x)                      # Forward pass\n                loss = self.criterion(self.state, y) # Calculating loss\n                self.valid_loss += loss.item()       # Adding to epoch loss\n\n        # Adding loss to history\n        self.valid_loss_hist.append(self.valid_loss / len(validation_loader))",s+="\n\n\n    def fit(self, train_loader, validation_loader=None, epochs=10, show_progress=True):\n\n        # Possibly prepping progress message\n        if show_progress:\n            epoch_l = max(len(str(epochs)), 2)\n            print('Training model...')\n            print('%sEpoch   Training loss   Validation loss   Duration' % ''.rjust(2 * epoch_l - 4, ' '))\n            t = time.time()\n\n        # Looping through epochs\n        for epoch in range(epochs):\n            self.fit_step(train_loader)                 # Optimizing weights\n            if validation_loader != None:               # Perform validation?\n                self.validation_step(validation_loader) # Calculating validation loss\n\n            # Possibly printing progress\n            if show_progress:\n                print('%s/%s' % (str(epoch + 1).rjust(epoch_l, ' '), str(epochs).ljust(epoch_l, ' ')),\n                    '| %s' % str(round(self.train_loss_hist[-1], 8)).ljust(13, ' '),\n                    '| %s' % str(round(self.valid_loss_hist[-1], 8)).ljust(15, ' '),\n                    '| %ss' % str(round(time.time() - t, 3)).rjust(7, ' '))\n                t = time.time()",s+="\n\n\n    def plot_hist(self):\n\n        # Adding plots\n        plt.plot(self.train_loss_hist, color='blue', label='Training loss')\n        plt.plot(self.valid_loss_hist, color='springgreen', label='Validation loss')\n\n        # Axis labels\n        plt.xlabel('Epoch')\n        plt.ylabel('Loss')\n        plt.legend(loc='upper right')\n\n        # Displaying plot\n        plt.show()",s+="\n\n\n"+function(e,t){var n="    def save(self, name='model.pth'):";return n+="\n        if not '.pth' in name: name += '.pth'",n+="\n        torch.save({",t.map(function(t){if("Input"!==e[t].specTitle){var a=h(e,t);n+="\n            '"+a+"': self."+a+","}}),n+="\n            'train_loss':      self.train_loss,",n+="\n            'valid_loss':      self.valid_loss,",n+="\n            'train_loss_hist': self.train_loss_hist,",n+="\n            'valid_loss_hist': self.valid_loss_hist,",n+="\n            'optim_type':      self.optim_type,",n+="\n            'alpha':           self.alpha,",n+="\n            'criterion':       self.criterion,",n+="\n            'use_cuda':        self.use_cuda",n+="\n        }, name)",n+="\n\n\n    @staticmethod",n+="\n    def load(name='model.pth'):",n+="\n        if not '.pth' in name: name += '.pth'",n+="\n        checkpoint = torch.load(name)",n+="\n        model = neural_net(",n+="\n            optimizer = checkpoint['optim_type'],",n+="\n            alpha     = checkpoint['alpha'],",n+="\n            criterion = checkpoint['criterion'],",n+="\n            use_cuda  = checkpoint['use_cuda']",n+="\n        )",t.map(function(t){if("Input"!==e[t].specTitle){var a=h(e,t);n+="\n        model."+a+" = checkpoint['"+a+"']"}}),n+="\n        model.train_loss      = checkpoint['train_loss']",n+="\n        model.valid_loss      = checkpoint['valid_loss']",n+="\n        model.train_loss_hist = checkpoint['train_loss_hist']",n+="\n        model.valid_loss_hist = checkpoint['valid_loss_hist']",n+="\n        model.startup_routines()",n+="\n        return model"}(t.lib,a)}function v(){return{input:{title:"Input",params:{n_dims:{min:1,max:1/0,current:2},dimensions:{type:"tuple",min:1,max:1/0,current:[1,1]}},autoparams:function(e,t){return t},outshape:function(e,t){return t.dimensions.current}},linear:{title:"Linear",ref:"nn.Linear",id:0,params:{in_features:{type:"int",min:1,max:1/0,current:1},out_features:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.out_features.current,a},autoparams:function(e,t){return t.in_features.current=e[e.length-1],t}},flatten:{title:"Flatten",ref:"Flatten",id:1,params:{},outshape:function(e,t){var n=1/e[0];return e.map(function(e){n*=e}),[e[0],Math.round(n)]},autoparams:function(e,t){return t}},conv1d:{title:"Conv1d",ref:"nn.Conv1d",id:2,params:{in_channels:{type:"int",min:1,max:1/0,current:1},out_channels:{type:"int",min:1,max:1/0,current:1},kernel_size:{type:"tuple",min:1,max:1/0,current:[3]},stride:{type:"tuple",min:1,max:1/0,current:[1]},padding:{type:"tuple",min:0,max:1/0,current:[0]},dilation:{type:"tuple",min:1,max:1/0,current:[1]},groups:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=e[2],a=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]);return[e[0],t.out_channels.current.current,a]},autoparams:function(e,t){return t.in_channels.current=e[1],t}},conv2d:{title:"Conv2d",ref:"nn.Conv2d",id:3,params:{in_channels:{type:"int",min:1,max:1/0,current:1},out_channels:{type:"int",min:1,max:1/0,current:1},kernel_size:{type:"tuple",min:1,max:1/0,current:[3,3]},stride:{type:"tuple",min:1,max:1/0,current:[1,1]},padding:{type:"tuple",min:0,max:1/0,current:[0,0]},dilation:{type:"tuple",min:1,max:1/0,current:[1,1]},groups:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=e[2],a=e[3],r=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]),i=Math.floor(1+(a+2*t.padding.current[1]-t.dilation.current[1]*(t.kernel_size.current[1]-1)-1)/t.stride.current[1]);return[e[0],t.out_channels.current,r,i]},autoparams:function(e,t){return t.in_channels.current=e[1],t}},conv3d:{title:"Conv3d",ref:"nn.Conv3d",id:4,params:{in_channels:{type:"int",min:1,max:1/0,current:1},out_channels:{type:"int",min:1,max:1/0,current:1},kernel_size:{type:"tuple",min:1,max:1/0,current:[3,3,3]},stride:{type:"tuple",min:1,max:1/0,current:[1,1,1]},padding:{type:"tuple",min:0,max:1/0,current:[0,0,0]},dilation:{type:"tuple",min:1,max:1/0,current:[1,1,1]},groups:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=e[2],a=e[3],r=e[4],i=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]),s=Math.floor(1+(a+2*t.padding.current[1]-t.dilation.current[1]*(t.kernel_size.current[1]-1)-1)/t.stride.current[1]),o=Math.floor(1+(r+2*t.padding.current[2]-t.dilation.current[2]*(t.kernel_size.current[2]-1)-1)/t.stride.current[2]);return[e[0],t.out_channels.current,i,s,o]},autoparams:function(e,t){return t.in_channels.current=e[1],t}},maxpool1d:{title:"MaxPool1d",ref:"nn.MaxPool1d",id:5,params:{kernel_size:{type:"int",min:1,max:1/0,current:3},stride:{type:"int",min:1,max:1/0,current:1},padding:{type:"int",min:0,max:1/0,current:0},dilation:{type:"int",min:1,max:1/0,current:1},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(e,t){var n=e[2],a=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]);return[e[0],e[0],a]},autoparams:function(e,t){return t}},maxpool2d:{title:"MaxPool2d",ref:"nn.MaxPool2d",id:6,params:{kernel_size:{type:"tuple",min:1,max:1/0,current:[3,3]},stride:{type:"tuple",min:1,max:1/0,current:[1,1]},padding:{type:"tuple",min:0,max:1/0,current:[0,0]},dilation:{type:"tuple",min:1,max:1/0,current:[1,1]},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(e,t){var n=e[2],a=e[3],r=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]),i=Math.floor(1+(a+2*t.padding.current[1]-t.dilation.current[1]*(t.kernel_size.current[1]-1)-1)/t.stride.current[1]);return[e[0],e[1],r,i]},autoparams:function(e,t){return t}},maxpool3d:{title:"MaxPool3d",ref:"nn.MaxPool3d",id:7,params:{kernel_size:{type:"tuple",min:1,max:1/0,current:[3,3,3]},stride:{type:"tuple",min:1,max:1/0,current:[1,1,1]},padding:{type:"tuple",min:0,max:1/0,current:[0,0,0]},dilation:{type:"tuple",min:1,max:1/0,current:[1,1,1]},return_indices:{type:"bool",current:"False"},ceil_mode:{type:"bool",current:"False"}},outshape:function(e,t){var n=e[2],a=e[3],r=e[4],i=Math.floor(1+(n+2*t.padding.current[0]-t.dilation.current[0]*(t.kernel_size.current[0]-1)-1)/t.stride.current[0]),s=Math.floor(1+(a+2*t.padding.current[1]-t.dilation.current[1]*(t.kernel_size.current[1]-1)-1)/t.stride.current[1]),o=Math.floor(1+(r+2*t.padding.current[2]-t.dilation.current[2]*(t.kernel_size.current[2]-1)-1)/t.stride.current[2]);return[e[0],e[1],i,s,o]},autoparams:function(e,t){return t}},batchnorm1d:{title:"BatchNorm1d",ref:"nn.BatchNorm1d",id:8,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},batchnorm2d:{title:"BatchNorm2d",ref:"nn.BatchNorm2d",id:9,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},batchnorm3d:{title:"BatchNorm3d",ref:"nn.BatchNorm3d",id:10,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"True"},track_running_stats:{type:"bool",current:"True"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},groupnorm:{title:"GroupNorm",ref:"nn.GroupNorm",id:11,params:{num_groups:{type:"int",min:1,max:1/0,current:1},num_channels:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},affine:{type:"bool",current:"True"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_channels.current=e[1],t}},instancenorm1d:{title:"InstanceNorm1d",ref:"nn.InstanceNorm1d",id:12,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},instancenorm2d:{title:"InstanceNorm2d",ref:"nn.InstanceNorm2d",id:13,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},instancenorm3d:{title:"InstanceNorm3d",ref:"nn.InstanceNorm3d",id:14,params:{num_features:{type:"int",min:1,max:1/0,current:1},eps:{type:"double",min:1e-5,max:1,current:1e-5},momentum:{type:"double",min:0,max:1/0,current:.1},affine:{type:"bool",current:"False"},track_running_stats:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t.num_features.current=e[1],t}},rnn:{title:"RNN",ref:"nn.RNN",id:15,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},num_layers:{type:"int",min:1,max:1/0,current:1},nonlinearity:{type:"select",options:["relu","tanh"],current:"tanh"},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",min:0,max:1/0,current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},lstm:{title:"LSTM",ref:"nn.LSTM",id:16,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},num_layers:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",min:0,max:1/0,current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},gru:{title:"GRU",ref:"nn.GRU",id:17,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},num_layers:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"},batch_first:{type:"bool",current:"False"},dropout:{type:"double",min:0,max:1/0,current:0},bidirectional:{type:"bool",current:"False"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},rnncell:{title:"RNNCell",ref:"nn.RNNCell",id:18,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"},nonlinearity:{type:"select",options:["relu","tanh"],current:"tanh"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},lstmcell:{title:"LSTMCell",ref:"nn.LSTMCell",id:19,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},grucell:{title:"GRUCell",ref:"nn.GRUCell",id:20,params:{input_size:{type:"int",min:1,max:1/0,current:1},hidden_size:{type:"int",min:1,max:1/0,current:1},bias:{type:"bool",current:"True"}},outshape:function(e,t){var n=0,a=e.map(function(e,t){return n=t,e});return a[n]=t.hidden_size.current,a},autoparams:function(e,t){return t.input_size.current=e[e.length-1],t}},dropout:{title:"Dropout",ref:"nn.Dropout",id:21,params:{p:{type:"double",min:0,max:1,current:.5},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},dropout2d:{title:"Dropout2d",ref:"nn.Dropout2d",id:22,params:{p:{type:"double",min:0,max:1,current:.5},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},dropout3d:{title:"Dropout3d",ref:"nn.Dropout3d",id:23,params:{p:{type:"double",min:0,max:1,current:.5},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},alphadropout:{title:"AlphaDropout",ref:"nn.AlphaDropout",id:24,params:{p:{type:"double",min:0,max:1,current:.5},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},elu:{title:"ELU",ref:"nn.ELU",id:25,params:{alpha:{type:"double",min:0,max:1/0,current:1},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},hardshrink:{title:"Hardshrink",ref:"nn.Hardshrink",id:26,params:{lambd:{type:"double",min:-1/0,max:1/0,current:"0.5"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},hardtanh:{title:"Hardtanh",ref:"nn.Hardtanh",id:27,params:{min_val:{type:"double",min:-1/0,max:1/0,current:-1},max_val:{type:"double",min:-1/0,max:1/0,current:1},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},leakyrelu:{title:"LeakyReLU",ref:"nn.LeakyReLU",id:28,params:{negative_slope:{type:"double",min:0,max:1/0,current:.01},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},logsigmoid:{title:"LogSigmoid",ref:"nn.LogSigmoid",id:29,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},prelu:{title:"PReLU",ref:"nn.PReLU",id:30,params:{num_parameters:{type:"int",min:0,max:1/0,current:1},init:{type:"double",min:0,max:1/0,current:.25}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},relu:{title:"ReLU",ref:"nn.ReLU",id:31,params:{inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},relu6:{title:"ReLU6",ref:"nn.ReLU6",id:32,params:{inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},rrelu:{title:"RReLU",ref:"nn.RReLU",id:33,params:{lower:{type:"double",min:0,max:1/0,current:1/8},upper:{type:"double",min:0,max:1/0,current:1/3},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},selu:{title:"SELU",ref:"nn.SELU",id:34,params:{inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},celu:{title:"CELU",ref:"nn.CELU",id:35,params:{alpha:{type:"double",min:0,max:1/0,current:1},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},sigmoid:{title:"Sigmoid",ref:"nn.Sigmoid",id:36,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softplus:{title:"Softplus",ref:"nn.Softplus",id:37,params:{beta:{type:"double",min:0,max:1/0,current:1},threshold:{type:"double",min:0,max:1/0,current:20}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softshrink:{title:"Softshrink",ref:"nn.Softshrink",id:38,params:{lambd:{type:"double",min:0,max:1/0,current:.5}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softsign:{title:"Softsign",ref:"nn.Softsign",id:39,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},tanh:{title:"Tanh",ref:"nn.Tanh",id:40,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},tanhshrink:{title:"Tanhshrink",ref:"nn.Tanhshrink",id:41,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},threshold:{title:"Threshold",ref:"nn.Threshold",id:42,params:{threshold:{type:"double",min:0,max:1/0,current:.1},value:{type:"double",min:0,max:1/0,current:.1},inplace:{type:"bool",current:"False"}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softmin:{title:"Softmin",ref:"nn.Softmin",id:43,params:{dim:{type:"int",min:0,max:1/0,current:-1}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softmax:{title:"Softmax",ref:"nn.Softmax",id:44,params:{dim:{type:"int",min:0,max:1/0,current:-1}},outshape:function(e,t){return e},autoparams:function(e,t){return t}},softmax2d:{title:"Softmax2d",ref:"nn.Softmax2d",id:45,params:{},outshape:function(e,t){return e},autoparams:function(e,t){return t}},logsoftmax:{title:"LogSoftmax",ref:"nn.LogSoftmax",id:46,params:{dim:{type:"int",min:0,max:1/0,current:-1}},outshape:function(e,t){return e},autoparams:function(e,t){return t}}}}n(158);var _=n(597),x=n(55),k=n(20),w=n.n(k),S=n(21),E=n(131),C=n.n(E),O=n(133),j=n.n(O),P=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={value:void 0!==e.tab?e.tabs.indexOf(e.tab):0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.value,a=Math.ceil(this.props.width/this.props.tabs.length)+"px";return r.a.createElement("div",{className:t.root,style:{overflow:"hidden"}},r.a.createElement(C.a,{value:n,onChange:function(t,n){e.setState({value:n}),e.props.onSelectTab&&e.props.onSelectTab(e.props.tabs[n])},textColor:"primary",classes:{root:t.tabsRoot,indicator:t.tabsIndicator},scrollButtons:!1},this.props.tabs.map(function(e){return r.a.createElement(j.a,{disableRipple:!0,classes:{root:t.tabRoot,selected:t.tabSelected},label:e,style:{width:a}})})))}}]),t}(r.a.Component),z=Object(S.withStyles)(function(e){return{root:{flexGrow:1,overflow:"scroll"},tabsRoot:{borderBottom:"1px solid #1890ff"},tabsIndicator:{backgroundColor:"#1890ff"},tabRoot:{textTransform:"initial",minWidth:50,fontWeight:e.typography.fontWeightRegular,marginRight:0*e.spacing.unit,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{color:"#40a9ff",opacity:1},"&$tabSelected":{color:"#1890ff"},"&:focus":{color:"#40a9ff"}},tabSelected:{},typography:{padding:0*e.spacing.unit}}})(P),F=n(35),T=n.n(F),M=n(67),N=n.n(M),I=n(65),R=n.n(I),A=n(66),L=n.n(A),B=n(141),U=n.n(B),D=n(140),W=n.n(D),V=n(43),H=n.n(V),G=n(22),q=n.n(G),J=n(90),$=n.n(J),K=n(91),Q=n.n(K),X=n(85),Y=n.n(X),Z=n(34),ee=n(44),te=n(70),ne=n(5),ae=n.n(ne),re=n(54),ie=n(52),se=n.n(ie),oe=n(33),le=n.n(oe),ue=n(53),ce=n.n(ue),pe=n(68),de=n.n(pe),me=n(25);function he(e){var t=e.inputRef,n=Object(te.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}var fe={Control:function(e){return r.a.createElement(q.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:he,inputProps:Object(ee.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(le.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ce.a,{tabIndex:-1,label:e.children,className:ae()(e.selectProps.classes.chip,Object(Z.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(de.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(w.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(T.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(w.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(w.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},ge=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={current:e.current},n.options=e.options.map(function(e){return{value:e,label:e}}),n.msg=e.msg,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme,i={input:function(e){return Object(ee.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:n.root},r.a.createElement(se.a,null,r.a.createElement(re.a,{classes:n,styles:i,options:this.options,components:fe,value:{label:this.state.current},placeholder:"Select an operation",onChange:function(t){t?(e.setState({current:t.value}),e.props.onChange&&e.props.onChange(t.value)):(e.setState({current:""}),e.props.onChange&&e.props.onChange(""))},isClearable:!0})))}}]),t}(r.a.Component),be=Object(S.withStyles)(function(e){return{root:{flexGrow:1,height:50},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(me.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:2,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(ge),ye=Object(S.createMuiTheme)({palette:{type:"dark"},typography:{useNextVariants:!0}}),ve=Object(S.createMuiTheme)({palette:{type:"light"},typography:{useNextVariants:!0}});x.github.hljs.background="#ffffff";var _e=function(e){var t=e.environment;return r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("div",null,r.a.createElement("h3",{style:{marginTop:"0px"}},"Environment"),r.a.createElement(L.a,null,r.a.createElement(R.a,{htmlFor:"libSelect"},"Library"),r.a.createElement(N.a,{value:t.library,inputProps:{name:"library select",id:"libSelect"},onChange:function(t){var n=e.refresh().environment;n.library=t.target.value,e.updateEnv(n)}},t.libraries.map(function(e){return r.a.createElement(T.a,{value:e},e)})))),r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement("h3",null,"Customize view"),[{r:"darktheme",t:"Dark theme"},{r:"showName",t:"Show names"},{r:"showShape",t:"Show shapes"},{r:"avoidCollisions",t:"Avoid collisions"}].map(function(t){return r.a.createElement($.a,{style:{paddingTop:0},control:r.a.createElement(Q.a,{checked:e.settings[t.r],color:"primary",onChange:function(n){var a=e.refresh().settings;a[t.r]=!a[t.r],e.updateSettings(a)}}),label:t.t})})))},xe=function(e){e.environment.library;var t=e.darktheme?x.atelierForestDark:x.github;return r.a.createElement("div",{style:{fontSize:12}},r.a.createElement(_.a,{language:"python",style:t,showLineNumbers:!0},e.code))},ke=function(e){var t=e.flowpoints[e.selected];if(t){var n=t.specs.params,a={int:[],double:[],bool:[],tuple:[],select:[]};"Input"===t.specs.title&&a.int.push(r.a.createElement(q.a,{label:"N dimensions",type:"number",variant:"outlined",margin:"dense",style:{width:"155px",paddingRight:"5px"},value:n.n_dims.current,onChange:function(t){var n=e.refresh().flowpoints[e.selected],a=n.specs.params;a.n_dims.current=Math.max(Math.min(t.target.value,a.n_dims.max),a.n_dims.min),a.n_dims.current<a.dimensions.current.length?a.dimensions.current=a.dimensions.current.splice(0,a.n_dims.current):a.n_dims.current>a.dimensions.current.length&&Array.from(Array(a.n_dims.current-a.dimensions.current.length).keys()).map(function(e){a.dimensions.current.push(1)}),e.updatePointSettings(e.selected,n)}})),Object.keys(n).map(function(t){var i=n[t];switch(i.type){case"int":a.int.push(r.a.createElement(q.a,{label:t,type:"number",variant:"outlined",margin:"dense",style:{width:"155px",paddingRight:"5px"},value:n[t].current,onChange:function(n){var a=e.refresh().flowpoints[e.selected],r=a.specs.params[t];r.current=Math.max(Math.min(n.target.value,r.max),r.min),e.updatePointSettings(e.selected,a)}}));break;case"double":a.double.push(r.a.createElement(q.a,{label:t,type:"number",variant:"outlined",margin:"dense",style:{width:"155px",paddingRight:"5px"},value:n[t].current,onChange:function(n){var a=e.refresh().flowpoints[e.selected],r=a.specs.params[t];r.current=Math.max(Math.min(n.target.value,r.max),r.min),e.updatePointSettings(e.selected,a)}}));break;case"bool":a.bool.push(r.a.createElement($.a,{control:r.a.createElement(Q.a,{checked:"True"===i.current,color:"primary",onChange:function(n){var a=e.refresh().flowpoints[e.selected],r=a.specs.params[t];"True"===r.current?r.current="False":r.current="True",e.updatePointSettings(e.selected,a)}}),label:t}));break;case"tuple":a.tuple.push(r.a.createElement("div",{style:{paddingTop:"15px"}},r.a.createElement("div",null,r.a.createElement("h5",{style:{margin:"0px"}},t)),i.current.map(function(n,a){return r.a.createElement(q.a,{label:t+" "+a,type:"number",variant:"outlined",margin:"dense",style:{width:"155px",paddingRight:"5px"},value:n,onChange:function(n){var r=e.refresh().flowpoints,i=r[e.selected],s=r[e.selected].specs.params[t];s.current[a]=Math.max(Math.min(n.target.value,s.max),s.min),e.updatePointSettings(e.selected,i)}})})));break;case"select":a.select.push(r.a.createElement(L.a,null,r.a.createElement(R.a,{htmlFor:"selectfield"},t),r.a.createElement(N.a,{value:n[t].options.indexOf(n[t].current),style:{width:"155px",paddingRight:"5px"},onChange:function(n){var a=e.refresh().flowpoints[e.selected],r=a.specs.params[t];r.current=r.options[n.target.value],e.updatePointSettings(e.selected,a)},inputProps:{id:"selectfield"}},n[t].options.map(function(e,t){return r.a.createElement(T.a,{value:t},e)}))))}});var i=e.environment.getModules(),s={};return Object.keys(i).map(function(e){s[i[e].title]=e}),r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("div",null,r.a.createElement("h2",{style:{marginTop:"0px"}},"Flowpoint settings"),r.a.createElement(be,{current:t.specs.title,options:Object.keys(s),onChange:function(t){if(t in s){var n=e.refresh().flowpoints[e.selected];n.specs=i[s[t]],e.updatePointSettings(e.selected,n)}}}),r.a.createElement(q.a,{label:"Name",value:t.name,margin:"tight",style:{width:"80%"},onChange:function(t){var n=e.refresh().flowpoints[e.selected];n.name=t.target.value,e.updatePointSettings(e.selected,n)}}),r.a.createElement(Y.a,{"aria-label":"Delete",color:H.a[500],style:{marginLeft:10,marginTop:5,color:H.a[300]},onClick:e.deleteSelected},r.a.createElement(W.a,null))),r.a.createElement("div",{style:{paddingTop:"25px"}},r.a.createElement("h3",null,"Parameters"),r.a.createElement("div",null,a.int),r.a.createElement("div",null,a.double),r.a.createElement("div",null,a.select),r.a.createElement("div",null,a.tuple),r.a.createElement("div",null,a.bool)))}return r.a.createElement("div",{style:{display:"table",width:"100%",height:"50px"}},r.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle",textAlign:"center"}},"Click on a flowpoint to display it's settings"))},we=function(e){return r.a.createElement(S.MuiThemeProvider,{theme:e.darktheme?ye:ve},r.a.createElement(U.a,{variant:"persistent",anchor:"left",open:e.open},r.a.createElement("div",{class:"fullSidebar",style:{maxWidth:e.settings.drawerWidth,color:e.darktheme?"white":"black"}},r.a.createElement(w.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{padding:"15px"}},"Flowpoints ML"),r.a.createElement("div",null,r.a.createElement(z,{tabs:["Settings","Code","Flowpoint"],tab:e.settings.tab,width:350,onSelectTab:function(t){var n=e.refresh().settings;n.tab=t,n.drawerWidth="Code"===t?600:350,e.updateSettings(n)}})),r.a.createElement("div",{class:"scrollBox",style:{backgroundColor:e.darktheme?x.atelierForestDark.hljs.background:null}},r.a.createElement("div",null,"Settings"===e.settings.tab?r.a.createElement(_e,{environment:e.environment,flowpoints:e.flowpoints,refresh:e.refresh,updateEnv:e.updateEnv,settings:e.settings,updateSettings:e.updateSettings}):null,"Code"===e.settings.tab?r.a.createElement(xe,{environment:e.environment,flowpoints:e.flowpoints,refresh:e.refresh,code:e.code,darktheme:e.darktheme}):null,"Flowpoint"===e.settings.tab?r.a.createElement(ke,{selected:e.selected,settings:e.settings,environment:e.environment,flowpoints:e.flowpoints,refresh:e.refresh,deleteSelected:e.deleteSelected,updatePointSettings:e.updatePointSettings}):null)))))},Se={0:"IIA",1:"IIB",2:"IIC",3:"IID"};function Ee(e){return e.toString(36)}function Ce(e){return parseInt(e,36)}function Oe(e,t){var n=t.params,a=e.split(Se[2]);return Object.keys(n).sort().map(function(e,t){var r=n[e],i=a[t];"bool"===r.type?r.current="t"===i?"True":"False":"tuple"===r.type?i.split(Se[3]).map(function(e,t){r.current[t]=Ce(e)}):"select"===r.type?r.current=r.options[i]:"int"===r.type?r.current=Ce(i):r.current=i}),t.params=n,t}function je(e){var t={a:"auto",t:"top",l:"left",r:"right",b:"bottom"},n=e.split(Se[2]),a={};return n.map(function(e){""!==e&&(a[Ce(e.substring(0,e.length-2))]={output:t[e[e.length-2]],input:t[e[e.length-1]]})}),a}function Pe(e,t){var n=""+t;return n+=Se[1]+e.name,n+=Se[1]+Ee(Math.round(e.pos.x/10)),n+=Se[1]+Ee(Math.round(e.pos.y/10)),n+=Se[1]+("Input"===e.specs.title?"":Ee(e.specs.id)),n+=Se[1]+function(e){var t="";return Object.keys(e).map(function(n){t+=Ee(n)+e[n].output[0]+e[n].input[0]+Se[2]}),Object.keys(e).length>0&&(t=t.substring(0,t.length-Se[2].length)),t}(e.outputs),n+=Se[1]+function(e){var t="";return Object.keys(e).sort().map(function(n){var a=e[n];"bool"===a.type?t+="True"===a.current?"t":"f":"tuple"===a.type?(a.current.map(function(e){t+=Ee(e)+Se[3]}),t=t.substring(0,t.length-Se[3].length)):"select"===a.type?t+=a.options.indexOf(a.current):"int"===a.type?t+=Ee(a.current):t+=a.current,t+=Se[2]}),t.substring(0,t.length-Se[2].length)}(e.specs.params)}function ze(e){var t=(e=e.replace(/%20/g," ")).split(Se[0]),n={P:{t:"PyTorch",modules:v}},a={library:n[e[0]].t,getModules:n[e[0]].modules,darktheme:"D"===e[1],showName:"T"===e[2],showSidebar:"T"===e[3],count:Ce(t[1]),inputColor:"#"+t[2],outputColor:"#"+t[3]},r={},i=a.getModules();Object.keys(i).map(function(e){r[i[e].id]=e});var s={};return t.splice(4,t.length).map(function(e){var t=function(e,t,n){var a=e.split(Se[1]),r={name:a[1],output_shape:[],pos:{x:10*Ce(a[2]),y:10*Ce(a[3])},specs:Oe(a[6],n()[""===a[4]?"input":t[Ce(a[4])]]),outputs:je(a[5]),isHover:!1};return{key:a[0],p:r}}(e,r,a.getModules);s[t.key]=t.p}),a.flowpoints=s,Object.keys(s).map(function(e){"Input"===s[e].specs.title&&(s[e].specs.params.n_dims.current=s[e].specs.params.dimensions.current.length)}),a}var Fe=n(45),Te=n.n(Fe),Me=n(86),Ne=n.n(Me),Ie=n(146),Re=n.n(Ie),Ae=n(143),Le=n.n(Ae),Be=n(144),Ue=n.n(Be),De=n(87),We=n.n(De),Ve=n(88),He=n.n(Ve),Ge=n(69),qe=n.n(Ge),Je=n(93),$e=n.n(Je),Ke=n(64),Qe=n.n(Ke),Xe=n(145),Ye=n.n(Xe),Ze=n(142),et=n.n(Ze),tt=n(92),nt=n.n(tt),at=[{label:"Afghanistan"},{label:"Aland Islands"},{label:"Albania"},{label:"Algeria"},{label:"American Samoa"},{label:"Andorra"},{label:"Angola"},{label:"Anguilla"},{label:"Antarctica"},{label:"Antigua and Barbuda"},{label:"Argentina"},{label:"Armenia"},{label:"Aruba"},{label:"Australia"},{label:"Austria"},{label:"Azerbaijan"},{label:"Bahamas"},{label:"Bahrain"},{label:"Bangladesh"},{label:"Barbados"},{label:"Belarus"},{label:"Belgium"},{label:"Belize"},{label:"Benin"},{label:"Bermuda"},{label:"Bhutan"},{label:"Bolivia, Plurinational State of"},{label:"Bonaire, Sint Eustatius and Saba"},{label:"Bosnia and Herzegovina"},{label:"Botswana"},{label:"Bouvet Island"},{label:"Brazil"},{label:"British Indian Ocean Territory"},{label:"Brunei Darussalam"}].map(function(e){return{value:e.label,label:e.label}});function rt(e){var t=e.inputRef,n=Object(te.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}var it={Control:function(e){return r.a.createElement(q.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:rt,inputProps:Object(ee.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(le.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ce.a,{tabIndex:-1,label:e.children,className:ae()(e.selectProps.classes.chip,Object(Z.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(de.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(w.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(T.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(w.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(w.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},st=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},n.handleChange=function(e){return function(t){n.setState(Object(Z.a)({},e,t))}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a={input:function(e){return Object(ee.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(se.a,null,r.a.createElement(re.a,{classes:t,styles:a,options:at,components:it,value:this.state.single,onChange:this.handleChange("single"),placeholder:"Search a country (start with a)",isClearable:!0}),r.a.createElement("div",{className:t.divider}),r.a.createElement(re.a,{classes:t,styles:a,textFieldProps:{label:"Label",InputLabelProps:{shrink:!0}},options:at,components:it,value:this.state.multi,onChange:this.handleChange("multi"),placeholder:"Select multiple countries",isMulti:!0})))}}]),t}(r.a.Component);Object(S.withStyles)(function(e){return{root:{flexGrow:1,height:250},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(me.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(st);function ot(e,t,n){var a="";return e.split(t).map(function(e){a+=e+n}),a.substring(0,a.length-n.length)}var lt=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={lastPos:{x:50,y:50},code:"",selected:null,count:0,flowpoints:{},current_url:"",url:"",settings:{tab:"Settings",drawerWidth:350,darktheme:!0,showShape:!1,showName:!1,showSidebar:!0,avoidCollisions:!0,inputColor:"#41e2f4",outputColor:"#4164f4",snackshow:!1,snackmsg:"Hello world",snackcolor:qe.a.A700},environment:{library:"PyTorch",libraries:["PyTorch"],getModules:v}},n.baseUrl=window.location.href.split("/?")[0],"/"!==n.baseUrl[n.baseUrl.length-1]&&(n.baseUrl+="/"),n.lib={},n.addFlowpoint=n.addFlowpoint.bind(Object(d.a)(Object(d.a)(n))),n.handleClickPoint=n.handleClickPoint.bind(Object(d.a)(Object(d.a)(n))),n.deleteSelected=n.deleteSelected.bind(Object(d.a)(Object(d.a)(n))),n.prepCode=n.prepCode.bind(Object(d.a)(Object(d.a)(n))),n.prepOutputShapes=n.prepOutputShapes.bind(Object(d.a)(Object(d.a)(n))),n.updatePointSettings=n.updatePointSettings.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split(this.baseUrl)[1];if(t.includes("p=load"))try{t=t.split("p=load")[1],console.log(t);var n=ze(t=ot(t,"lly",".")),a=this.state.settings,r=this.state.environment;a.darktheme=n.darktheme,a.showName=n.showName,a.inputColor=n.inputColor,a.outputColor=n.outputColor,a.showSidebar=n.showSidebar,r.library=n.library,a.snackshow=!0,a.snackmsg="Loaded model from URL",a.snackcolor=qe.a.A700,this.setState({count:n.count,flowpoints:n.flowpoints,settings:a,environment:r},function(){e.prepOutputShapes(),e.prepCode()})}catch(i){(a=this.state.settings).snackshow=!0,a.snackmsg="Failed to load from URL",a.snackcolor=H.a.A400,this.setState({settings:a})}else this.prepOutputShapes(),this.prepCode()}},{key:"prepCode",value:function(){var e=null;"PyTorch"===this.state.environment.library&&(e=y),this.setState({code:e(this.state.flowpoints,this.lib)+"\n\n\n"})}},{key:"prepOutputShapes",value:function(){var e=this,t=this.state.flowpoints;this.lib=b(t);var n=[];this.lib.order.map(function(a){"Input"===e.lib.lib[a].specTitle&&(t[a].output_shape=t[a].specs.outshape(null,t[a].specs.params),n.push(a))}),this.lib.order.map(function(a){if(!n.includes(a)){var r=null;Object.keys(e.lib.lib[a].inputs).map(function(e){n.includes(e)&&(r=e)}),t[a].specs.params=t[a].specs.autoparams(t[r].output_shape,t[a].specs.params),t[a].output_shape=t[a].specs.outshape(t[r].output_shape,t[a].specs.params),n.push(a)}}),this.setState({flowpoints:t})}},{key:"updatePointSettings",value:function(e,t){var n=this.state.flowpoints;n[e]=t,this.setState({flowpoints:n}),this.prepOutputShapes(),this.prepCode()}},{key:"deleteSelected",value:function(){var e=this,t=this.state.flowpoints;delete t[this.state.selected],Object.keys(t).map(function(n){e.state.selected in t[n].outputs&&delete t[n].outputs[e.state.selected]}),this.setState({flowpoints:t,selected:null}),this.prepOutputShapes(),this.prepCode()}},{key:"addFlowpoint",value:function(){var e=this.state.flowpoints;e[""+this.state.count]={name:"",output_shape:[],pos:{x:this.state.lastPos.x,y:this.state.lastPos.y},outputs:{},isHover:!1,specs:this.state.environment.getModules().linear},this.setState({flowpoints:e,count:this.state.count+1,lastPos:{x:this.state.lastPos.x,y:this.state.lastPos.y+90}}),this.prepOutputShapes(),this.prepCode()}},{key:"handleClickPoint",value:function(e){var t=this.state.selected,n=this.state.flowpoints;if(null===t)t=e;else{if(t!==e){var a=n[t];e in a.outputs?delete a.outputs[e]:a.outputs[e]={output:"auto",input:"auto"}}t=null}this.setState({selected:t,flowpoints:n}),this.prepOutputShapes(),this.prepCode()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundColor:this.state.settings.darktheme?"black":"white"}},r.a.createElement(we,{selected:this.state.selected,open:this.state.settings.showSidebar,flowpoints:this.state.flowpoints,settings:this.state.settings,environment:this.state.environment,refresh:function(){return e.state},updateSettings:function(t){e.setState({settings:t})},updateEnv:function(t){e.setState({environment:t})},deleteSelected:this.deleteSelected,darktheme:this.state.settings.darktheme,code:this.state.code,updatePointSettings:this.updatePointSettings}),r.a.createElement(m.Flowspace,{selected:this.state.selected,avoidCollisions:this.state.settings.avoidCollisions,onClick:function(t){e.setState({selected:null})},inputColor:"#41e2f4",outputColor:"#4164f4",style:{height:"100vh",marginLeft:this.state.settings.drawerWidth*this.state.settings.showSidebar+"px",backgroundColor:this.state.settings.darktheme?"black":"white",transition:["margin-left 0.4s ease-out","background-color 0.2s ease-out"]}},Object.keys(this.state.flowpoints).map(function(t){var n=e.state.flowpoints[t];return r.a.createElement(m.Flowpoint,{key:t,snap:{x:10,y:10},startPosition:n.pos,outputs:n.outputs,onClick:function(){e.handleClickPoint(t)},noShadow:!0,onDrag:function(n){var a=e.state.flowpoints;a[t].pos=n,e.setState({flowpoints:a,lastPos:n})},style:{height:"auto",maxHeight:e.state.settings.showShape?150:50,backgroundColor:e.state.settings.darktheme?"black":"white",borderStyle:"solid",borderColor:e.state.selected===t?"#ff9721":"#4164f4",borderWidth:"1px",borderRadius:"5px",transition:"border-color 0.4s ease-out"}},r.a.createElement("div",{style:{color:e.state.settings.darktheme?"white":"black",height:"auto"}},r.a.createElement("div",{style:{display:"table",width:"100%",height:"50px"}},r.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle",textAlign:"center"}},e.state.settings.showName?n.name:n.specs.title)),e.state.settings.showShape?function(e){var t="[";return e.map(function(e){t+=e+","}),e.length>0&&(t=t.substring(0,t.length-1)),t+="]",r.a.createElement("div",{style:{textAlign:"center",paddingBottom:"10px"}},t)}(n.output_shape):null))})),r.a.createElement("div",{style:{bottom:"5px",left:this.state.settings.drawerWidth*this.state.settings.showSidebar+5+"px",position:"fixed",transition:"left 0.4s ease-out"}},r.a.createElement("div",{style:{paddingBottom:4}},r.a.createElement(Te.a,{style:{background:et.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},"aria-label":"Add",onClick:function(){e.addFlowpoint()}},r.a.createElement(Ne.a,null))),r.a.createElement("div",{style:{paddingBottom:4}},r.a.createElement(Te.a,{style:{background:$e.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},"aria-label":"Copy code",onClick:function(){nt()(e.state.code);var t=e.state.settings;t.snackshow=!0,t.snackmsg="Copied code to clipboard",t.snackcolor=$e.a.A400,e.setState({settings:t})}},r.a.createElement(Le.a,null))),r.a.createElement("div",{style:{paddingBottom:4}},r.a.createElement(Te.a,{style:{background:Qe.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},"aria-label":"Copy code",onClick:function(){var t=function(e,t,n,a,r,i,s,o){var l=""+s[0];return l+=r?"D":"L",l+=i?"T":"F",l+=o?"T":"F",l+=Se[0]+Ee(a),l+=Se[0]+t.substring(1,t.length)+Se[0]+n.substring(1,n.length),Object.keys(e).map(function(t){l+=Se[0]+Pe(e[t],t)}),l}(e.state.flowpoints,e.state.settings.inputColor,e.state.settings.outputColor,e.state.count,e.state.settings.darktheme,e.state.settings.showName,e.state.environment.library,e.state.settings.showSidebar);t=ot(t,".","lly"),t=e.baseUrl+"?_p=load"+t,nt()(t);var n=e.state.settings;n.snackshow=!0,n.snackmsg="Copied link to clipboard",n.snackcolor=Qe.a.A400,e.setState({settings:n})}},r.a.createElement(Ue.a,null))),r.a.createElement("div",null,r.a.createElement(Te.a,{style:{background:Ye.a.A400,color:"#ffffff",zIndex:6,boxShadow:"none"},"aria-label":"Hide/Show",onClick:function(){var t=e.state.settings;t.showSidebar=!t.showSidebar,e.setState({settings:t})}},r.a.createElement(Re.a,null)))),r.a.createElement(We.a,{autoHideDuration:3e3,onClose:function(){var t=e.state.settings;t.snackshow=!1,e.setState({settings:t})},anchorOrigin:{vertical:"bottom",horizontal:"right"},open:this.state.settings.snackshow},r.a.createElement(He.a,{message:this.state.settings.snackmsg,style:{backgroundColor:this.state.settings.snackcolor,color:"black"}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.a4e21053.chunk.js.map